<div class="d-flex flex-grow-1 justify-content-center">
  <div
    class="d-flex flex-column shadow form-width mt-2 mb-2 pl-2 pr-2 pb-5 pt-4"
  >
    <div class="text-primary mb-5 mt-2">
      <span class="card-header-text text-secondary font-weight-bold ml-4"
        >PERSONAL INFO</span
      >
    </div>

    <div class="pl-4 pr-4">
      <form #personalInfoForm="ngForm">
        <div class="d-flex flex-md-row flex-column">
          <div class="flex-fill">
            <label
              for="firstName"
              class="text-primary"
              [ngClass]="{ 'text-danger': validateTextInput(firstName) }"
              >First name*</label
            >
            <input
              id="firstName"
              type="text"
              class="form-control text-primary-light"
              [(ngModel)]="personalInfo.firstName"
              [ngClass]="{ 'is-invalid': validateTextInput(firstName) }"
              name="firstName"
              #firstName="ngModel"
              required
            />
            <div *ngIf="validateTextInput(firstName)" class="text-danger">
              <small>Please enter first name.</small>
            </div>
          </div>

          <div class="flex-fill ml-md-3 mt-md-0 mt-2">
            <label
              for="lastName"
              class="text-primary"
              [ngClass]="{ 'text-danger': validateTextInput(lastName) }"
              >Last name*</label
            >
            <input
              id="lastName"
              type="text"
              class="form-control text-primary-light"
              [(ngModel)]="personalInfo.lastName"
              [ngClass]="{ 'is-invalid': validateTextInput(lastName) }"
              name="lastName"
              #lastName="ngModel"
              required
            />
            <div *ngIf="validateTextInput(lastName)" class="text-danger">
              <small>Please enter last name.</small>
            </div>
          </div>
        </div>

        <div class="form-group mt-3">
          <label
            for="emailAddress"
            class="text-primary"
            [ngClass]="{ 'text-danger': validateTextInput(email) }"
            >Email*</label
          >
          <input
            type="email"
            class="form-control text-primary-light"
            [(ngModel)]="personalInfo.email"
            [ngClass]="{ 'is-invalid': validateTextInput(email) }"
            name="email"
            #email="ngModel"
            email
            required
          />
          <div *ngIf="validateTextInput(email)" class="text-danger">
            <small>Email is required.</small>
          </div>
        </div>

        <div class="d-flex flex-md-row flex-column mt-3">
          <div class="flex-fill">
            <label
              for="jobTitle"
              class="text-primary"
              [ngClass]="{ 'text-danger': validateTextInput(jobTitle) }"
              >Job title*</label
            >
            <input
              id="jobTitle"
              type="text"
              class="form-control text-primary-light"
              [(ngModel)]="personalInfo.jobTitle"
              [ngClass]="{ 'is-invalid': validateTextInput(jobTitle) }"
              name="jobTitle"
              #jobTitle="ngModel"
              required
            />
            <div *ngIf="validateTextInput(jobTitle)" class="text-danger">
              <small>Please enter your current job title.</small>
            </div>
          </div>

          <div class="flex-fill ml-md-3 mt-md-0 mt-2">
            <label for="Contact">Contact</label>
            <input
              id="contact"
              type="number"
              class="form-control text-primary-light"
              [(ngModel)]="personalInfo.contact"
              name="contact"
              #contact="ngModel"
            />
          </div>
        </div>

        <div class="d-flex flex-md-row flex-column mt-3">
          <div class="flex-fill form-group">
            <label
              class="text-primary"
              [ngClass]="{ 'text-danger': educationDetailsMissing }"
              >Education*</label
            >
            <ul class="list-group">
              <li
                class="list-group-item text-primary-light"
                *ngFor="
                  let education of educationTimeline;
                  let selectedEducationIndex = index
                "
              >
                <div class="d-flex flex-md-row flex-column">
                  <span>
                    {{ education.graduationYear }}
                  </span>
                  <span class="ml-md-4 mt-md-0 mt-2 mr-auto">
                    {{ education.course }}
                  </span>
                  <div class="mt-md-0 mt-2">
                    <span class="icons text-primary-light">
                      <fa-icon
                        [icon]="faPencilAlt"
                        size="md"
                        (click)="editSelectedEducation(selectedEducationIndex)"
                      ></fa-icon>
                    </span>
                    <span class="icons text-primary-light">
                      <fa-icon
                        [icon]="faTrashAlt"
                        class="ml-4"
                        size="md"
                        (click)="
                          deleteSelectedEducation(selectedEducationIndex)
                        "
                      ></fa-icon>
                    </span>
                  </div>
                </div>
              </li>
              <li
                class="list-group-item"
                [ngClass]="{ invalid: educationDetailsMissing }"
              >
                <a (click)="openEducationPopup()" class="text-primary">
                  <fa-icon [icon]="faPlusSquare" size="lg"></fa-icon>
                  <span class="ml-2">click to add education</span></a
                >
              </li>
            </ul>
            <small *ngIf="educationDetailsMissing" class="text-danger"
              >Education details are required.</small
            >
            <small *ngIf="!educationDetailsMissing" class="form-text text-muted"
              >Education timeline will be displayed as shown in the list.</small
            >
          </div>
        </div>

        <div class="d-flex mt-3 justify-content-end">
          <button
            type="button"
            class="btn btn-primary-light"
            [disabled]="personalInfoForm.invalid || !educationTimeline.length"
            (click)="savePersonalInfo()"
          >
            Save
          </button>
        </div>
      </form>
    </div>
  </div>
</div>
