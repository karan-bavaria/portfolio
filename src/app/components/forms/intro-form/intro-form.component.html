<div class="d-flex flex-grow-1 justify-content-center">
  <div
    class="d-flex flex-column shadow form-width mt-2 mb-2 pl-2 pr-2 pb-1 bg-white"
    [ngClass]="{ 'pb-4': !collapsed }"
  >
    <div class="d-flex text-primary mt-2" [ngClass]="{ 'mb-5': !collapsed }">
      <span class="card-header-text text-secondary font-weight-bold ml-4"
        >INTRODUCTION</span
      >
      <a
        (click)="collapsed = !collapsed"
        *ngIf="editMode"
        class="ml-auto expand-icon"
      >
        <fa-icon
          [icon]="faChevronDown"
          class="text-secondary ml-2"
          size="lg"
        ></fa-icon
      ></a>
    </div>

    <div class="pl-4 pr-4" [ngClass]="{ collapse: collapsed }">
      <form [formGroup]="introductionForm">
        <div class="form-group mt-2">
          <label
            for="introduction"
            class="text-primary"
            [ngClass]="{ 'text-danger': validateTextInput(introduction) }"
            >Introduction*</label
          >
          <textarea
            formControlName="introduction"
            class="form-control is-invalid text-primary-light"
            [ngClass]="{ 'is-invalid': validateTextInput(introduction) }"
            id="introduction"
            name="introduction"
            rows="4"
            [maxlength]="introductionMaxLength"
            autosize
          ></textarea>
          <div *ngIf="validateTextInput(introduction)" class="text-danger">
            <small>Please provide your intro.</small>
          </div>
          <small class="form-text text-muted"
            >Keep it clean and catchy. You can only enter 80 characters.</small
          >
        </div>

        <div class="form-group mt-3">
          <label
            for="coverLetter"
            class="text-primary"
            [ngClass]="{ 'text-danger': validateTextInput(coverLetter) }"
            >Cover letter*</label
          >
          <textarea
            formControlName="coverLetter"
            class="form-control is-invalid text-primary-light animated"
            [ngClass]="{ 'is-invalid': validateTextInput(coverLetter) }"
            id="coverLetter"
            name="coverLetter"
            rows="7"
            autosize
          ></textarea>
          <div *ngIf="validateTextInput(coverLetter)" class="text-danger">
            <small>Please provide your cover letter.</small>
          </div>
        </div>

        <ngb-alert
          *ngIf="show"
          type="success"
          [dismissible]="false"
          class="bg-secondary text-white"
          >Edit Successful</ngb-alert
        >

        <div class="d-flex mt-3 mb-5 justify-content-end">
          <button
            type="button"
            class="btn btn-primary-light"
            (click)="saveChanges()"
            [disabled]="!introductionForm.dirty || introductionForm.invalid"
          >
            {{ editMode ? "Save Changes" : "Next" }}
          </button>
        </div>
      </form>
    </div>
  </div>
</div>
